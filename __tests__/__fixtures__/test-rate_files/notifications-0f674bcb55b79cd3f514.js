webpackJsonp([9],{11:function(e,n){e.exports=gon},17:function(e,n){e.exports=$},18:function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}t.d(n,"b",function(){return d}),t.d(n,"a",function(){return b});var a=t(0),c=t.n(a),s=t(9),u=t.n(s),f=t(2),l=t.n(f),p=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),d=u.a.t.bind(u.a),b=(u.a.l.bind(u.a),function(e){function n(){return o(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return r(n,e),p(n,[{key:"render",value:function(){var e=this.props,n=e.scope,t=e.tkey,o=e.params,i=void 0===o?{}:o,r=Object.assign({},i,{scope:n});return c.a.createElement("span",{dangerouslySetInnerHTML:{__html:d(t,r)}})}}]),n}(c.a.Component));b.propTypes={scope:l.a.string,tkey:l.a.string.isRequired,params:l.a.object}},23:function(e,n){e.exports=Routes},24:function(e,n,t){"use strict";var o=t(15);t.n(o);n.a=function(e){return Object(o.reduce)(e,function(e,n,t){return e[t]=t,e},{})}},25:function(e,n,t){"use strict";n.a=function(e){return function(n){n.preventDefault(),e(n)}}},27:function(e,n,t){"use strict";function o(e,n){return Object(i.e)(e,n,Object(i.d)(i.a.apply(void 0,u),window.devToolsExtension?window.devToolsExtension():function(e){return e}))}n.a=o;var i=t(26),r=t(46),a=t.n(r),c=t(47),s=t.n(c),u=[a.a,s.a]},802:function(e,n,t){"use strict";function o(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){function o(i,r){try{var a=n[i](r),c=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(c).then(function(e){o("next",e)},function(e){o("throw",e)});e(c)}return o("next")})}}Object.defineProperty(n,"__esModule",{value:!0});var i={};t.d(i,"toggleMenu",function(){return L}),t.d(i,"onToggle",function(){return P});var r=t(11),a=t.n(r),c=t(0),s=t.n(c),u=t(19),f=t.n(u),l=t(21),p=t(26),d=(t(35),t(3)),b=t.n(d),v=t(18),h=t(25),m=function(e){var n=e.notifications,t=e.isOpen,o=e.hasNewNotifications,i=e.actions,r=i.onToggle,a=b()({fa:!0,"fa-bell":o,"text-danger":o,"fa-bell-o":!o}),c=b()({"nav-item":!0,dropdown:!0,show:t});return s.a.createElement("li",{className:c},s.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:Object(h.a)(function(){return r({notifications:n,hasNewNotifications:o})})},s.a.createElement("span",{className:a})),s.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdownMenuLink"},n.length>0?n.map(function(e){var n=e.id,t=e.message,o=e.isRemoved,i=e.url;if(!o)return s.a.createElement("a",{className:"dropdown-item",href:i,key:n,dangerouslySetInnerHTML:{__html:t}})}):s.a.createElement("div",{className:"dropdown-item"},s.a.createElement(v.a,{tkey:"notifications.empty"}))))},w=t(17),y=t.n(w),O=t(15),g=t(39),N=t.n(g),_=t(23),E=t.n(_),j=t(9),x=t.n(j),k=t(29),T=t(24),M=Object(T.a)({TOGGLE_MENU:null}),G=this,L=Object(k.a)(M.TOGGLE_MENU),P=function(e){var n=e.notifications,t=e.hasNewNotifications;return function(){var e=o(regeneratorRuntime.mark(function e(o){var i,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=18;break}return i=E.a.last_viewed_notification_api_user_path({format:"json"}),r=Object(O.max)(n,"id").id,e.prev=3,e.next=6,N.a.post(i,{notification_id:r});case 6:e.next=18;break;case 8:e.prev=8,e.t0=e.catch(3),a=void 0,e.t1=e.t0,e.next="Forbidden"===e.t1?14:16;break;case 14:return a=x.a.t("notification.flashes.forbidden"),e.abrupt("break",17);case 16:a=x.a.t("notification.flashes.error");case 17:y.a.notify(a,{type:"danger"});case 18:o(L());case 19:case"end":return e.stop()}},e,G,[[3,8]])}));return function(n){return e.apply(this,arguments)}}()},R=function(e){return{notifications:e.notifications,isOpen:e.isOpen,hasNewNotifications:e.hasNewNotifications}},U=function(e){return{actions:Object(p.b)(i,e)}},I=Object(l.b)(R,U)(m),C=t(27),D={notifications:[],isOpen:!1,hasNewNotifications:!1},S={notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.notifications;switch(arguments[1].type){case M.TOGGLE_MENU:default:return e}},hasNewNotifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.hasNewNotifications;switch(arguments[1].type){case M.TOGGLE_MENU:return!1;default:return e}},isOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.isOpen;switch(arguments[1].type){case M.TOGGLE_MENU:return!e;default:return e}}},H=Object(p.c)(S);!function(e,n){var t=n.some(function(n){return n.id>e.last_viewed_notification_id}),o=Object(C.a)(H,{notifications:n,hasNewNotifications:t});f.a.render(s.a.createElement(l.a,{store:o},s.a.createElement(I,null)),document.getElementById("notifications"))}(a.a.current_user,a.a.notifications)},9:function(e,n){e.exports=I18n}},[802]);
//# sourceMappingURL=notifications-0f674bcb55b79cd3f514.js.map